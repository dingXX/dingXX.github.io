<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Navigator.vibrate 手机振动 | cynthia'blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Navigator.vibrate 手机振动</h1><a id="logo" href="/.">cynthia'blog</a><p class="description">她很懒，什么都没有留下</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Navigator.vibrate 手机振动</h1><div class="post-meta">Jan 30, 2018<span> | </span><span class="category"><a href="/categories/技术/">技术</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#判断浏览器对振动API的支持情况"><span class="toc-number">1.</span> <span class="toc-text">判断浏览器对振动API的支持情况</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#语法"><span class="toc-number">2.</span> <span class="toc-text">语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#单次振动"><span class="toc-number">2.1.</span> <span class="toc-text">单次振动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#振动模式"><span class="toc-number">2.2.</span> <span class="toc-text">振动模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#停止振动"><span class="toc-number">2.3.</span> <span class="toc-text">停止振动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注意事项"><span class="toc-number">3.</span> <span class="toc-text">注意事项</span></a></li></ol></div></div><div class="fix-wrap"><div id="toc" class="toc-article toc-fixed"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#判断浏览器对振动API的支持情况"><span class="toc-number">1.</span> <span class="toc-text">判断浏览器对振动API的支持情况</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#语法"><span class="toc-number">2.</span> <span class="toc-text">语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#单次振动"><span class="toc-number">2.1.</span> <span class="toc-text">单次振动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#振动模式"><span class="toc-number">2.2.</span> <span class="toc-text">振动模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#停止振动"><span class="toc-number">2.3.</span> <span class="toc-text">停止振动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注意事项"><span class="toc-number">3.</span> <span class="toc-text">注意事项</span></a></li></ol></div></div><div class="post-content"><p><code>Navigator.vibrate()</code> 方法，使设备（有振动硬件）产生有频率的振动。<br>即允许mobile程序员使用JavaScript调用手机的振动功能，并且能设定振动的方式和时长。<br><a id="more"></a></p>
<h2 id="判断浏览器对振动API的支持情况"><a href="#判断浏览器对振动API的支持情况" class="headerlink" title="判断浏览器对振动API的支持情况"></a>判断浏览器对振动API的支持情况</h2><p>看到有些文章是这么判断的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> supportsVibrate = <span class="string">'vibrate'</span> <span class="keyword">in</span> navigator;</div></pre></td></tr></table></figure>
<p>看似合理，但看一下浏览器兼容性，其实有些浏览器是需要加前缀的，so,是不是将加前缀的也判断一下~</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isSupportsVibrate</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> isSupport = <span class="string">'vibrate'</span> <span class="keyword">in</span> navigator || <span class="string">'webkitVibrate'</span> <span class="keyword">in</span> navigator || <span class="string">'mozVibrate'</span> <span class="keyword">in</span> navigator|| <span class="string">'msVibrate'</span> <span class="keyword">in</span> navigator;</div><div class="line">    <span class="keyword">return</span> isSupport;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>再来，pc版的部分浏览器是支持这个API的，但实际上并不会有振动效果，所以为了效果的真正实现，是否应该判断一下是否是<em>安卓移动端</em>？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isSupportsVibrate</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> isAndroid() &amp;&amp; (<span class="built_in">window</span>.navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * [vibrate 振动api]</div><div class="line"> * @param &#123;number|array&#125; pattern 振动模式</div><div class="line"> * @return &#123;bool&#125; 成功返回true, 失败返回false</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> successBool = <span class="built_in">window</span>.navigator.vibrate(pattern);</div></pre></td></tr></table></figure>
<h3 id="单次振动"><a href="#单次振动" class="headerlink" title="单次振动"></a>单次振动</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 单次振动200ms</span></div><div class="line"><span class="built_in">window</span>.navigator.vibrate(<span class="number">200</span>);</div><div class="line"><span class="built_in">window</span>.navigator.vibrate([<span class="number">200</span>]);</div></pre></td></tr></table></figure>
<h3 id="振动模式"><a href="#振动模式" class="headerlink" title="振动模式"></a>振动模式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">奇数为振动时间，偶数为不振动的时间</div><div class="line"><span class="built_in">window</span>.navigator.vibrate([<span class="number">200</span>, <span class="number">100</span>, <span class="number">200</span>]);</div></pre></td></tr></table></figure>
<p>振动在每个振动周期结束时自动停止</p>
<h3 id="停止振动"><a href="#停止振动" class="headerlink" title="停止振动"></a>停止振动</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.navigator.vibrate(<span class="number">0</span>);</div><div class="line"><span class="built_in">window</span>.navigator.vibrate([<span class="number">0</span>]);</div></pre></td></tr></table></figure>
<p>一遇到<code>window.navigator.vibrate(0)</code>,就会停止振动，即使前面有个振动周期？？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 这是不振动的</span></div><div class="line"><span class="built_in">window</span>.navigator.vibrate([<span class="number">200</span>, <span class="number">100</span>, <span class="number">200</span>]);</div><div class="line"><span class="built_in">window</span>.navigator.vibrate(<span class="number">0</span>);</div></pre></td></tr></table></figure>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol>
<li><blockquote>
<p>When the vibration pattern is too long or any of its elements are too large, until Firefox 26 included, Gecko threw an exception, instead of returning false (bug 884935). From Firefox 32 onwards, it returns true but truncates the pattern (bug 1014581).</p>
</blockquote>
</li>
</ol>
<p>数组太长会出bug??</p>
<ol>
<li><blockquote>
<p>Beginning in Chrome 55, this is not supported in cross-origin iframes.</p>
</blockquote>
</li>
</ol>
<p>不能在跨域的iframes中使用</p>
<ol>
<li><blockquote>
<p>Beginning in Chrome 60/Opera 47, this method requires a user gesture. Otherwise it returns false.</p>
</blockquote>
</li>
</ol>
<p>需要用户交互触发事件，不然不会振动</p>
<ol>
<li>静音模式下函数会触发，并返回<code>true</code>，但不会振动（是不是讲了废话…）</li>
</ol>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://dingxx.im/2018/01/30/vibrate/" data-id="cjyfu6do1001zybhgocbdf58h" class="article-share-link">分享</a><div class="tags"><a href="/tags/JS-API/">JS_API</a></div><div class="post-nav"><a href="/2018/02/07/browser-back-handle/" class="pre">不同浏览器后退处理方式</a><a href="/2017/07/18/webpack3-primary-learning/" class="next">webpack3初级学习</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/translate/">翻译</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/koa2/" style="font-size: 15px;">koa2</a> <a href="/tags/JS/" style="font-size: 15px;">JS</a> <a href="/tags/flowChart/" style="font-size: 15px;">flowChart</a> <a href="/tags/canvas/" style="font-size: 15px;">canvas</a> <a href="/tags/svg/" style="font-size: 15px;">svg</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/JS-API/" style="font-size: 15px;">JS_API</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/笔记/" style="font-size: 15px;">笔记</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/排序/" style="font-size: 15px;">排序</a> <a href="/tags/webpack/" style="font-size: 15px;">webpack</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/07/23/2019-07-es5-es6-class/">ES5 & ES6 的类</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/15/2019-07-set-and-map/">Set & Map 数据结构</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/11/sort-with-js/">javascript版排序算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/27/pb-grpc/">Protocol Buffers 和 gRPC 简单了解</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/14/note-graphic-http/">《图解HTTP》笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/28/vue-router-keepalive/">在vue-router中使用keep-alive</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/26/node-debug/">node调试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/26/iOS-pit/">iOS下遇到的前端问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/22/whatsapp-share/">调起whatsapp分享调研总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/22/koa2-note/">koa2的简单使用笔记</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">cynthia'blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>